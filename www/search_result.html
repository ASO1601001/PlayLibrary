<ons-page id="search_result">
	<ons-toolbar>
		<div class="left">
			<ons-toolbar-button onclick="fn.open()">
				<ons-icon icon="ion-navicon, material:md-menu"></ons-icon>
			</ons-toolbar-button>
		</div>
		<div class="center">
			検索結果
		</div>
	</ons-toolbar>
  <div id="result">
    検索結果
  </div>

  <script>
    var str = localStorage.getItem('word');
    var regexp = new RegExp(str);
    firebase.auth().onAuthStateChanged(function(user) {
      firebase.firestore().collection('plays').get()
        .then((snapshot) => {
          snapshot.forEach((doc) => {
            if (doc.data().name.match(regexp)) {
              var elem = document.getElementById("result");
              elem.innerHTML += `<p>${doc.data().name}</p>`
            }
          });
      })
      .catch((err) => {
        console.log('Error getting documents', err);
      });
    })
  </script>
</ons-page>
